# GitHub ä¸€é”®æ¨é€åŠŸèƒ½å®ç°æ€»ç»“

## âœ… å·²å®Œæˆçš„åŠŸèƒ½

### 1. åç«¯ API ç«¯ç‚¹

#### `/api/github/auth` (GET)
- åˆå§‹åŒ– GitHub OAuth è®¤è¯æµç¨‹
- ç”Ÿæˆå®‰å…¨çš„ state å‚æ•°
- è¿”å› GitHub OAuth æˆæƒ URL

#### `/api/github/callback` (GET)
- å¤„ç† GitHub OAuth å›è°ƒ
- äº¤æ¢æˆæƒç è·å– access token
- è·å– GitHub ç”¨æˆ·ä¿¡æ¯
- å°† token å®‰å…¨å­˜å‚¨åˆ° Supabase æ•°æ®åº“

#### `/api/github/push` (POST)
- åˆ›å»ºæ–°çš„ GitHub ä»“åº“
- æ¨é€æ‰€æœ‰ç”Ÿæˆçš„æ–‡ä»¶åˆ°ä»“åº“
- æ”¯æŒç§æœ‰/å…¬å¼€ä»“åº“é€‰é¡¹
- è¿”å›ä»“åº“ URL

#### `/api/github/status` (GET)
- æ£€æŸ¥ç”¨æˆ·çš„ GitHub è¿æ¥çŠ¶æ€
- è¿”å› GitHub ç”¨æˆ·åï¼ˆå¦‚æœå·²è¿æ¥ï¼‰

### 2. æ•°æ®åº“ Schema

åˆ›å»ºäº† `supabase-github-schema.sql` æ–‡ä»¶ï¼ŒåŒ…å«ï¼š
- `user_github_tokens` è¡¨ç»“æ„
- Row Level Security (RLS) ç­–ç•¥
- ç´¢å¼•ä¼˜åŒ–

### 3. å‰ç«¯ UI æ›´æ–°

åœ¨ `app/generate/page.tsx` ä¸­æ·»åŠ äº†ï¼š
- GitHub è¿æ¥çŠ¶æ€æ˜¾ç¤º
- "Connect GitHub" æŒ‰é’®
- "Push to GitHub" æŒ‰é’®
- æ¨é€å¯¹è¯æ¡†ï¼ˆåŒ…å«ä»“åº“åç§°ã€æè¿°ã€ç§æœ‰é€‰é¡¹ï¼‰
- å®æ—¶çŠ¶æ€æ›´æ–°
- é”™è¯¯å¤„ç†å’Œç”¨æˆ·åé¦ˆ

### 4. ä¾èµ–åŒ…

å·²å®‰è£…ï¼š
- `@octokit/rest` - GitHub API å®¢æˆ·ç«¯åº“

### 5. æ–‡æ¡£

åˆ›å»ºäº†ä»¥ä¸‹æ–‡æ¡£ï¼š
- `GITHUB_INTEGRATION.md` - å®Œæ•´çš„ä½¿ç”¨æŒ‡å—
- `supabase-github-schema.sql` - æ•°æ®åº“ schema
- æ›´æ–°äº† `env.txt` - æ·»åŠ  GitHub OAuth é…ç½®è¯´æ˜

## ğŸ”§ é…ç½®è¦æ±‚

### å¿…éœ€çš„ç¯å¢ƒå˜é‡

```env
GITHUB_CLIENT_ID=your_github_client_id
GITHUB_CLIENT_SECRET=your_github_client_secret
NEXT_PUBLIC_APP_URL=http://localhost:3009  # æˆ–ç”Ÿäº§ç¯å¢ƒ URL
```

### æ•°æ®åº“è®¾ç½®

éœ€è¦åœ¨ Supabase ä¸­è¿è¡Œ `supabase-github-schema.sql` æ¥åˆ›å»ºå¿…è¦çš„è¡¨ã€‚

## ğŸš€ ä½¿ç”¨æµç¨‹

1. **é…ç½® GitHub OAuth App**
   - åœ¨ GitHub Developer Settings ä¸­åˆ›å»º OAuth App
   - è®¾ç½®å›è°ƒ URL

2. **é…ç½®ç¯å¢ƒå˜é‡**
   - æ·»åŠ  GitHub Client ID å’Œ Secret
   - è®¾ç½®åº”ç”¨ URL

3. **è®¾ç½®æ•°æ®åº“**
   - è¿è¡Œ SQL schema æ–‡ä»¶

4. **ç”¨æˆ·ä½¿ç”¨**
   - ç™»å½•åº”ç”¨
   - ç‚¹å‡» "Connect GitHub" æˆæƒ
   - ç”Ÿæˆä»£ç åç‚¹å‡» "Push to GitHub"
   - å¡«å†™ä»“åº“ä¿¡æ¯å¹¶æ¨é€

## ğŸ“‹ åŠŸèƒ½ç‰¹æ€§

- âœ… OAuth 2.0 å®‰å…¨è®¤è¯
- âœ… è‡ªåŠ¨åˆ›å»º GitHub ä»“åº“
- âœ… æ¨é€å®Œæ•´é¡¹ç›®ç»“æ„
- âœ… æ”¯æŒç§æœ‰/å…¬å¼€ä»“åº“
- âœ… å®æ—¶çŠ¶æ€æ˜¾ç¤º
- âœ… é”™è¯¯å¤„ç†å’Œç”¨æˆ·åé¦ˆ
- âœ… åŒè¯­æ”¯æŒï¼ˆä¸­è‹±æ–‡ï¼‰

## ğŸ”’ å®‰å…¨æªæ–½

1. **Token å­˜å‚¨**: ä½¿ç”¨ Supabase RLS ä¿æŠ¤
2. **OAuth æµç¨‹**: æ ‡å‡† OAuth 2.0 æµç¨‹
3. **æƒé™èŒƒå›´**: ä»…è¯·æ±‚å¿…è¦çš„ `repo` æƒé™
4. **çŠ¶æ€éªŒè¯**: ä½¿ç”¨ base64 ç¼–ç çš„ state å‚æ•°

## ğŸ“ ä»£ç ç»“æ„

```
app/
â”œâ”€â”€ api/
â”‚   â””â”€â”€ github/
â”‚       â”œâ”€â”€ auth/
â”‚       â”‚   â””â”€â”€ route.ts          # OAuth åˆå§‹åŒ–
â”‚       â”œâ”€â”€ callback/
â”‚       â”‚   â””â”€â”€ route.ts          # OAuth å›è°ƒå¤„ç†
â”‚       â”œâ”€â”€ push/
â”‚       â”‚   â””â”€â”€ route.ts          # æ¨é€ä»£ç åˆ° GitHub
â”‚       â””â”€â”€ status/
â”‚           â””â”€â”€ route.ts          # æ£€æŸ¥è¿æ¥çŠ¶æ€
â”œâ”€â”€ generate/
â”‚   â””â”€â”€ page.tsx                  # æ›´æ–°çš„ç”Ÿæˆé¡µé¢ï¼ˆåŒ…å« GitHub åŠŸèƒ½ï¼‰
lib/
â””â”€â”€ supabase.ts                   # Supabase å®¢æˆ·ç«¯é…ç½®
supabase-github-schema.sql        # æ•°æ®åº“ schema
GITHUB_INTEGRATION.md             # ä½¿ç”¨æ–‡æ¡£
```

## ğŸ¯ ä¸‹ä¸€æ­¥å»ºè®®

1. **æµ‹è¯•åŠŸèƒ½**
   - æµ‹è¯• GitHub OAuth æµç¨‹
   - æµ‹è¯•ä»£ç æ¨é€åŠŸèƒ½
   - éªŒè¯é”™è¯¯å¤„ç†

2. **å¯é€‰å¢å¼º**
   - æ”¯æŒæ¨é€åˆ°ç°æœ‰ä»“åº“
   - æ”¯æŒé€‰æ‹©åˆ†æ”¯
   - è‡ªåŠ¨æ·»åŠ  README
   - è‡ªåŠ¨æ·»åŠ  .gitignore

## âœ¨ æ€»ç»“

GitHub ä¸€é”®æ¨é€åŠŸèƒ½å·²å®Œå…¨å®ç°ï¼Œç”¨æˆ·å¯ä»¥ï¼š
1. å®‰å…¨åœ°è¿æ¥ GitHub è´¦æˆ·
2. ä¸€é”®å°†ç”Ÿæˆçš„ä»£ç æ¨é€åˆ° GitHub
3. è‡ªåŠ¨åˆ›å»ºä»“åº“å¹¶æ¨é€æ‰€æœ‰æ–‡ä»¶
4. é€‰æ‹©ç§æœ‰æˆ–å…¬å¼€ä»“åº“

æ‰€æœ‰åŠŸèƒ½éƒ½å·²é›†æˆåˆ°ç°æœ‰çš„ä»£ç ç”Ÿæˆæµç¨‹ä¸­ï¼Œæä¾›äº†æ— ç¼çš„ç”¨æˆ·ä½“éªŒã€‚

































